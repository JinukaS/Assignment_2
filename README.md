# Full-Stack LMS Component Generator & Escape Room

This is a full-stack web application built with Next.js, fulfilling the requirements for the CSE3CWA/CSE5006 course. The project has two main parts: a powerful tool for generating theme-aware, self-contained HTML components for Moodle LMS, and an interactive, multi-stage "Escape Room" coding challenge.

The application features a complete frontend built with React/TypeScript and a robust backend powered by Next.js Route Handlers. It uses Prisma as an ORM to connect to a MySQL database for data persistence, and the entire application is containerized with Docker for predictable and portable deployment.

---

## Features

*   **HTML Tabs Generator:** A dynamic interface on the homepage to configure and generate self-contained HTML/JS/CSS tab components.
*   **Theme-Aware Output:** Generated code automatically adapts to the user's system dark/light mode preference.
*   **Full CRUD Functionality:** A full-stack feature allowing users to save their generated code to a database, view all saved items in a gallery, and delete them.
*   **Dynamic View Pages:** Every saved component gets a unique, shareable URL that renders the component in an iframe, fulfilling the "lambda function" requirement.
*   **Interactive Escape Room:** A multi-stage coding challenge with a timer, custom UI, and interactive debugging puzzles.
*   **Modern Tech Stack:** Built with Next.js App Router, TypeScript, Prisma, and MySQL.
*   **Containerized:** Fully configured for deployment with Docker.

---

## Tech Stack

*   **Framework:** Next.js (App Router)
*   **Language:** TypeScript
*   **Backend:** Next.js Route Handlers
*   **Database:** MySQL
*   **ORM:** Prisma
*   **Deployment:** Docker

---

## 1. Prerequisites: Essential Software Installation

Before you can run this project, you need to install the following core technologies on your system.

### A) Install Node.js (includes npm and npx)

Node.js is the JavaScript runtime environment that this project is built on. Installing it also automatically installs `npm` (Node Package Manager) and `npx` (Node Package Execute).

1.  **Download:** Go to the official Node.js website: [nodejs.org](https://nodejs.org/)
2.  **Choose a Version:** Download the **LTS (Long Term Support)** version. It is the most stable and recommended for most users.
3.  **Install:** Run the installer and follow the on-screen instructions, accepting the default settings.
4.  **Verify Installation:** Open a new terminal or command prompt and run the following commands. You should see version numbers printed for each.
    ```bash
    node -v
    npm -v
    npx -v
    ```

### B) Install Git

Git is required to download (clone) the project source code from its repository.

1.  **Download:** Go to the official Git website: [git-scm.com/downloads](https://git-scm.com/downloads)
2.  **Install:** Run the installer, accepting the default settings.

### C) Install a MySQL Server

This project requires a MySQL database to store data.

*   **For Local Development:** Install a local MySQL server. Free tools like **XAMPP**, **WAMP**, or the official **MySQL Community Server** are excellent options.
*   **For Production:** You will need a cloud-hosted MySQL database. A provider like **PlanetScale** is highly recommended for its generous free tier.

### D) Install Docker Desktop

Docker is required to build and run the application in a portable container, which is ideal for production deployment.

1.  **Download:** Go to the official Docker website: [docker.com/products/docker-desktop/](https://www.docker.com/products/docker-desktop/)
2.  **Install:** Run the installer and follow the instructions. This may require a system restart. After installation, make sure the Docker Desktop application is running.

---

## 2. Getting Started (for Local Development)

This guide explains how to get a cloned copy of this project running on your local machine. The `node_modules` and `.next` folders are not included in the source code and will be generated by these steps.

1.  **Clone the Repository:**
    ```bash
    git clone <your-repo-url>
    cd <project-folder-name>
    ```

2.  **Install Project Dependencies:** This command reads `package.json` and downloads all necessary libraries (like React, Next.js, and Prisma) into a `node_modules` folder.
    ```bash
    npm install
    ```

3.  **Create and Configure the Database:**
    *   Log in to your local MySQL server and create the database.
        ```sql
        CREATE DATABASE lms CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
        ```
    *   Create a file named `.env` in the project root for your database URL. For local development, the host must be `127.0.0.1`.
        ```
        # File: .env (replace with your local MySQL credentials)
        DATABASE_URL="mysql://USER:PASSWORD@127.0.0.1:PORT/lms"
        ```
        *Example:* `DATABASE_URL="mysql://root:root123@127.0.0.1:3306/lms"`

4.  **Run the Database Migration:** This command connects to your `lms` database and creates all the necessary tables based on the `prisma/schema.prisma` file.
    ```bash
    npx prisma migrate dev
    ```
    *(When prompted, you can give your migration a name like "init".)*

5.  **Run the Application:**
    ```bash
    npm run dev
    ```
    The application is now running at [http://localhost:3000](http://localhost:3000). The `.next` development folder will be generated automatically.

---

## 3. Deployment with Docker

This section explains how to build a production-ready Docker container and run it.

1.  **Configure Docker's Environment Variable:**
    *   To allow the Docker container to connect to the MySQL server running on your main computer for testing, you must change the host in your `.env` file to `host.docker.internal`.
    ```
    # File: .env (for Docker local testing)
    DATABASE_URL="mysql://root:root123@host.docker.internal:3306/lms"
    ```

2.  **Build the Docker Image:**
    *   This command reads the `Dockerfile` and builds a production-optimized image. The `.next` production build folder is created *inside* the container during this process.
    ```bash
    docker build -t my-lms-tool .
    ```

3.  **Run the Docker Container:**
    *   The `--env-file .env` flag injects your `DATABASE_URL` into the container at runtime.
    ```bash
    docker run -p 3000:3000 --env-file .env my-lms-tool
    ```
    The containerized application is now running at [http://localhost:3000](http://localhost:3000).

4. **Initialize Prisma (if needed):**
    *   If the `prisma` folder does not exist, run this command once to create it.
    ```bash
    npx prisma init
    ```
5. **(Optional) Verify Database Connection from Docker:**
    *   This command lets you test if your local database is reachable from the Docker network.
    ```bash
    docker run --rm -it mysql:8 mysql -h host.docker.internal -u root -p<your_password> -e "SHOW DATABASES;"
    ```
    *(Replace `<your_password>` with your actual password and ensure there is no space after `-p`)*

---

## 4. Deploying to the Cloud

1.  **Push your code** to a Git provider (like GitHub).
2.  **Choose a hosting platform** that supports Docker (e.g., Vercel, AWS, Google Cloud).
3.  **Connect your Git repository** to the hosting platform.
4.  **Set Environment Variables:** In your hosting provider's project settings, create a secret environment variable named `DATABASE_URL` and paste your **cloud database's connection string** into it.
5.  **Deploy:** The platform will build the Docker image from your `Dockerfile` and deploy it. Your application will be live on the internet, connected to your cloud database.